name: Publish

on:
  push:
    tags:
      - v*
  workflow_dispatch:
    inputs:
      version:
        description: 'Version tag to publish'
        required: false

permissions:
  contents: read
  packages: write

env:
  OCI_URL: ghcr.io/openkcm

jobs:
  released:
    env:
      IMAGE_SIGNING_ENABLED:
        description: 'Enable image signing (true|false)'
        required: false
        default: 'true'
      OCM_SIGNING_ENABLED:
        description: 'Enable OCM signing (true|false)'
        required: false
        default: 'false'
    uses: openkcm/build/.github/workflows/publish.svc.yaml@b689df7e293a21bb6cf485635b18efb945dc89cf
    secrets: inherit
